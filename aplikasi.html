<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suara Hewan Interaktif</title>
  <link rel="icon" href="icon.jpg" type="image/png" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #ffe3e3, #ffd6a5, #fdffb6, #caffbf);

      color: #333;
      min-height: 100vh;
      margin: 0;
      padding-bottom: 50px;
    }

    /* Menu Sticky */
    #fixedMenu {
      position: sticky;
      top: 0;
      z-index: 1100;
      background-color: #fff;
      padding: 12px 24px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border-bottom: 3px solid #f8b500;
      border-radius: 0 0 15px 15px;
      margin-bottom: 1.5rem;
    }

    #fixedMenu .form-control,
    #fixedMenu .form-select {
      border-radius: 25px;
      padding-left: 1.25rem;
      padding-right: 1.25rem;
      font-size: 1rem;
      transition: border-color 0.3s ease;
      border: 2px solid #f8b500;
    }
    #fixedMenu .form-control:focus,
    #fixedMenu .form-select:focus {
      border-color: #e67e00;
      box-shadow: 0 0 8px #e67e00aa;
      outline: none;
    }

    #toggleModeBtn {
      border-radius: 25px;
      background: linear-gradient(45deg, #f8b500, #fceabb);
      border: none;
      font-weight: 600;
      font-size: 1.1rem;
      transition: background 0.4s ease, transform 0.2s ease;
      box-shadow: 0 3px 8px rgba(248, 181, 0, 0.5);
    }
    #toggleModeBtn:hover {
      background: linear-gradient(45deg, #e67e00, #f8b500);
      transform: scale(1.05);
      box-shadow: 0 6px 15px rgba(230, 126, 0, 0.7);
    }

    h1.text-primary {
      text-shadow: 1px 1px 4px #d18c00aa;
      font-weight: 700;
      margin-bottom: 2rem;
    }

    /* Animal Cards */
    .animal-card {
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 1rem;
    }
    .animal-card:hover {
      transform: scale(1.07);
      box-shadow: 0 10px 20px rgba(0,0,0,0.25);
      z-index: 5;
    }

    .card-img-top {
      width: 100%;
      height: 170px;
      object-fit: contain;
      object-position: center;
      padding: 15px 10px 0 10px;
      border-bottom: 2px solid #f8b500;
      border-radius: 20px 20px 0 0;
      background: #fff8d4;
    }

    .animal-card p.category-badge {
      font-weight: 600;
      font-size: 0.9rem;
      margin-top: 0.5rem;
      padding: 4px 12px;
      border-radius: 20px;
      color: #fff;
      user-select: none;
      width: fit-content;
    }
    .category-darat {
      background-color: #27ae60; /* hijau */
    }
    .category-laut {
      background-color: #2980b9; /* biru */
    }

    /* Responsive */
    @media (max-width: 768px) {
      .card-img-top {
        height: 130px;
      }
      #fixedMenu {
        padding: 10px 16px;
      }
      #toggleModeBtn {
        font-size: 1rem;
        padding: 8px 0;
      }
    }
    @keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

h1.animated-title {
  font-size: 3rem;
  color: #173a70; /* Bootstrap primary */
  text-shadow: 2px 2px 5px rgba(0,0,0,0.2);
  animation: bounce 2s infinite;
  user-select: none;
}

  </style>
</head>
<body>
  <div class="container py-4">
    <h1 class="text-center fw-bold animated-title">üêæ Suara Hewan Interaktif</h1>


    <!-- Menu Sticky -->
    <div id="fixedMenu" class="container mb-4">
      <div class="row g-2 justify-content-center align-items-center">
        <div class="col-md-4 col-sm-12">
          <input type="text" id="searchInput" autocomplete="off" class="form-control" placeholder="üîç Cari hewan...">
        </div>
        <div class="col-md-3 col-sm-6">
          <select id="filterKategori" class="form-select">
            <option value="semua">üåç Semua Kategori</option>
            <option value="Darat">üêæ Darat</option>
            <option value="Laut">üåä Laut</option>
            <option value="Udara">ü™Ω Udara</option>
          </select>
        </div>
        <div class="col-md-3 col-sm-6 text-sm-end text-center">
          <button id="toggleModeBtn" class="btn btn-warning w-100">üéÆ Mode Kuis</button>
        </div>
      </div>
    </div>

    <div id="animalContainer" class="row"></div>
  </div>

  <script>
 const animals = [
    { nama: "Alpaca", kategori: "Darat", img: "img/alpaca.png", suara: "sounds/alpaka.mp3" },
    { nama: "Angsa", kategori: "Darat", img: "img/angsa.png", suara: "sounds/angsa.mp3" },
    { nama: "Antelop", kategori: "Darat", img: "img/antelope.png", suara: "sounds/antelop.mp3" },
    { nama: "Babi", kategori: "Darat", img: "img/babi.png", suara: "sounds/babi.mp3" },
    { nama: "Badak", kategori: "Darat", img: "img/badak.png", suara: "sounds/badak.mp3" },
    { nama: "Bebek", kategori: "Darat", img: "img/bebek.png", suara: "sounds/bebek.mp3" },
    { nama: "Kucing", kategori: "Darat", img: "img/kucing.png", suara: "sounds/kucing.mp3" },
    { nama: "Anjing", kategori: "Darat", img: "img/anjing.png", suara: "sounds/anjing.mp3" },
    { nama: "Ayam Jantan", kategori: "Darat", img: "img/ayamjantan.png", suara: "sounds/ayamjantan.mp3" },
    { nama: "Ayam Betina", kategori: "Darat", img: "img/ayambetina.png", suara: "sounds/ayambetina.mp3" },
    { nama: "Sapi", kategori: "Darat", img: "img/sapi.png", suara: "sounds/sapi.mp3" },
    { nama: "Domba", kategori: "Darat", img: "img/domba.png", suara: "sounds/domba.mp3" },
    { nama: "Lumba-Lumba", kategori: "Laut", img: "img/lumba.png", suara: "sounds/lumba.mp3" }
  ];

  const aksesLevel = localStorage.getItem('aksesLevel') || 'trial';

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function getDisplayedAnimals() {
    let list = [...animals];
    if (aksesLevel === 'trial') return shuffle(list).slice(0, 3);
    if (aksesLevel === 'basic') return shuffle(list).slice(0, 5);
    if (aksesLevel === 'plus') return list.sort((a, b) => a.nama.localeCompare(b.nama));
    return [];
  }

  let displayedAnimals = getDisplayedAnimals();
  let quizMode = false;
  let currentAnswer = null;

  const animalContainer = document.getElementById('animalContainer');
  const toggleModeBtn = document.getElementById('toggleModeBtn');
  const searchInput = document.getElementById('searchInput');
  const filterKategori = document.getElementById('filterKategori');

  function renderAnimals(data) {
    animalContainer.innerHTML = '';
    data.forEach(h => {
      const col = document.createElement('div');
      col.className = 'col-lg-4 col-md-6 mb-4';

      const kategoriClass = h.kategori.toLowerCase() === 'darat' ? 'category-darat' : (h.kategori.toLowerCase() === 'laut' ? 'category-laut' : '');

      col.innerHTML = `
        <div class="animal-card" data-nama="${h.nama}">
          <img src="${h.img}" alt="${h.nama}" class="card-img-top">
          <h5 class="mt-3">${h.nama}</h5>
          <p class="category-badge ${kategoriClass}">${h.kategori}</p>
        </div>
      `;

      col.querySelector('.animal-card').addEventListener('click', () => {
        if (!quizMode) {
          const audio = new Audio(h.suara);
          audio.play();
        }
        // Jika nanti diaktifkan quizMode, bisa dikembangkan
      });

      animalContainer.appendChild(col);
    });
  }

  function applyFilters() {
    const keyword = searchInput.value.trim().toLowerCase();
    const kategori = filterKategori.value;

    const hasilFilter = displayedAnimals.filter(h =>
      (kategori === 'semua' || h.kategori.toLowerCase() === kategori.toLowerCase()) &&
      h.nama.toLowerCase().includes(keyword)
    );

    renderAnimals(hasilFilter);
  }

  // Event listeners
  searchInput.addEventListener('input', applyFilters);
  filterKategori.addEventListener('change', applyFilters);
  toggleModeBtn.addEventListener('click', () => {
    quizMode = !quizMode;
    toggleModeBtn.textContent = quizMode ? "üìö Mode Belajar" : "üéÆ Mode Kuis";
    // Nanti bisa tambahkan logic quizMode
    applyFilters(); // tetap render ulang sesuai mode
  });

  // Render awal
  applyFilters();



    toggleModeBtn.addEventListener('click', function () {
  quizMode = !quizMode;

  if (quizMode) {
    this.textContent = 'üîä Mode Suara';
    Swal.fire('üéÆ Mode Kuis Aktif', 'Tebak suara dari gambar!', 'info');
    generateQuiz();
  } else {
    this.textContent = 'üéÆ Mode Kuis';
    Swal.fire('üîä Kembali ke Mode Suara', 'Klik gambar untuk dengarkan suara.', 'info');
    currentAnswer = null;
  }
});

function generateQuiz() {
  const allCards = document.querySelectorAll('.animal-card');
  if (allCards.length === 0) return;

  const randomCard = allCards[Math.floor(Math.random() * allCards.length)];
  currentAnswer = {
    nama: randomCard.getAttribute('data-nama'),
    suara: randomCard.getAttribute('data-suara'),
  };

  // Putar suara quiz
  if(window.quizAudio) {
    window.quizAudio.pause();
  }
  window.quizAudio = new Audio(currentAnswer.suara);
  window.quizAudio.play();

  Swal.fire({
    title: 'Tebak Suara Hewan',
    text: 'Klik gambar hewan yang cocok dengan suara ini!',
    icon: 'question',
    timer: 5000,
    timerProgressBar: true,
    showConfirmButton: false,
    didOpen: () => {
      window.quizAudio.play();
    }
  });
}

// URL sound benar & salah (ganti kalau mau pakai lokal)
const soundBenar = new Audio('sounds/benar.mp3');
const soundSalah = new Audio('sounds/salah.mp3');

animalContainer.addEventListener('click', e => {
  let card = e.target.closest('.animal-card');
  if (!card) return;

  if (quizMode) {
    const clickedName = card.getAttribute('data-nama');
    if (clickedName === currentAnswer.nama) {
      soundBenar.play();
      Swal.fire('üéâ Benar!', `Kamu berhasil menebak suara ${clickedName}!`, 'success').then(() => {
        soundBenar.pause();
        soundBenar.currentTime = 0;
        generateQuiz();
      });
    } else {
      soundSalah.play();
      Swal.fire('üòû Salah!', `Itu bukan suara ${clickedName}. Coba lagi ya!`, 'error').then(() => {
      soundSalah.pause();
        soundSalah.currentTime = 0;
        
      });
    }
  } else {
    // mode biasa play suara saat klik gambar
    const suaraSrc = card.getAttribute('data-suara');
    if (suaraSrc) {
      const audio = new Audio(suaraSrc);
      audio.play();
    }
  }
});



    // Search & filter events
    // searchInput.addEventListener('input', filterAndSearchAnimals);
    // filterKategori.addEventListener('change', filterAndSearchAnimals);

    // Initial render
    //renderAnimals(animals);
  </script>
</body>
</html>
